import socket
import random

# Configuración del servidor
host = '127.0.0.1'  # Dirección IP del servidor (localhost)
puerto = 12345  # Puerto para la conexión

# Creamos el socket del servidor
servidor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Enlazamos el socket al host y puerto
servidor.bind((host, puerto))

# Ponemos el servidor en modo de escucha
servidor.listen(1)
print(f"Servidor escuchando en {host}:{puerto}")

# Aceptamos la conexión entrante
cliente, direccion = servidor.accept()
print(f"Conexión entrante desde {direccion}")

while True:
    # Generamos un número aleatorio como producto
    item = random.randint(1, 100)
    # Enviamos el número al cliente
    cliente.send(str(item).encode())
    print(f"Enviado al cliente: {item}")

# Cerramos la conexión
cliente.close()
servidor.close()
