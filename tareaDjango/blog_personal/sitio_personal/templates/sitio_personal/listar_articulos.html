{% extends 'base.html' %}

{% block content %}
<div class="container mb-4 contenedor_articulos" style="position: relative;">
    <h1 style="color: #05202D; "><br />Blog Personal <br /></h1>
    <form class="form-inline" method="get" action="{% url 'listar_articulos' %}">
        <div class="form-group">
            <label for="items_per_page" class="mr-2">Elementos por pagina:</label>
            <select class="form-control" name="items_per_page" id="items_per_page">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="15">15</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary ml-2">Actualizar</button>
    </form>

    <!-- Opción de suscripción -->
    <div class="suscripcion">
        <h2>Suscríbete a nuestro Blog</h2>
        <form method="post" action="{% url 'suscribirse' %}">
            {% csrf_token %}
            {{ form.email.label_tag }} {{ form.email }}
            {{ form.nombre.label_tag }} {{ form.nombre }}
            {{ form.frecuencia.label_tag }} {{ form.frecuencia }}
            <button type="submit" class="btn btn-primary">Suscribirse</button>
        </form>
    </div>

    <ul class="nav nav-tabs mt-4" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="relevantes-tab" data-bs-toggle="tab" data-bs-target="#relevantes" type="button" role="tab" aria-controls="relevantes" aria-selected="true">Mas Relevantes</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="recientes-tab" data-bs-toggle="tab" data-bs-target="#recientes" type="button" role="tab" aria-controls="recientes" aria-selected="false">Mas Recientes</button>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="relevantes" role="tabpanel" aria-labelledby="relevantes-tab">
            <div class="linea_gris"></div>
            {% if items_page_likes %}
            {% for articulo in items_page_likes %}
            <div class="articulo">
                <div class="container text-start">
                    <div class="row justify-content-start">
                        <div class="col">
                            <img src="../static/img/thumbnails/{{ articulo.thumbnail_name}}" alt="{{ articulo.thumbnail_name}}">
                        </div>
                        <div class="col">
                            <div class="texto_miniatura">
                                <h2><a href="{% url 'detalle_articulo' articulo.id %}">{{ articulo.titulo }}</a></h2>
                                <h4>Preview:</h4>
                                <p>{{ articulo.preview }}</p>
                                <span>Tiempo de lectura: {{ articulo.tiempo_lectura }} minutos <br /></span>
                                <span>Fecha de Publicacion: {{ articulo.fecha_publicacion }} <br /></span>
                                <span>Likes: {{articulo.likes}}</span>
                                <span>
                                    Categorias:
                                    {% for etiqueta in articulo.etiquetas.all %}
                                    {{ etiqueta.nombre }}
                                    {% endfor %}
                                    <br />
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% if items_page_likes.has_other_pages %}
            <div class="btn-group" role="group" aria-label="Item pagination">
                {% if items_page_likes.has_previous %}
                <a href="?page={{ items_page_likes.previous_page_number }}" class="btn btn-outline-primary">&laquo;</a>
                {% endif %}
                {% for page_number in items_page_likes.paginator.page_range %}
                {% if items_page_likes.number == page_number %}
                <button class="btn btn-outline-primary active">
                    <span>{{ page_number }} <span class="sr-only">(current)</span></span>
                </button>
                {% else %}
                <a href="?page={{ page_number }}" class="btn btn-outline-primary">
                    {{ page_number }}
                </a>
                {% endif %}
                {% endfor %}
                {% if items_page_likes.has_next %}
                <a href="?page={{ items_page_likes.next_page_number }}" class="btn btn-outline-primary">&raquo;</a>
                {% endif %}
            </div>
            {% endif %}
            {% else %}
            <p>No items found.</p>
            {% endif %}
        </div>
        <div class="tab-pane fade" id="recientes" role="tabpanel" aria-labelledby="recientes-tab">
            {% if items_page_relevant %}
            {% for articulo in items_page_relevant %}
            <div class="articulo">
                <div class="container text-start">
                    <div class="row justify-content-start">
                        <div class="col">
                            <img src="../static/img/thumbnails/{{ articulo.thumbnail_name}}" alt="{{ articulo.thumbnail_name}}">
                        </div>
                        <div class="col">
                            <div class="texto_miniatura">
                                <h2><a href="{% url 'detalle_articulo' articulo.id %}">{{ articulo.titulo }}</a></h2>
                                <h4>Preview:</h4>
                                <p>{{ articulo.preview }}</p>
                                <span>Tiempo de lectura: {{ articulo.tiempo_lectura }} minutos <br /></span>
                                <span>Fecha de Publicacion: {{ articulo.fecha_publicacion }} <br /></span>
                                <span>Likes: {{articulo.likes}}</span>
                                <span>
                                    Categorias:
                                    {% for etiqueta in articulo.etiquetas.all %}
                                    {{ etiqueta.nombre }}
                                    {% endfor %}
                                    <br />
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% if items_page_relevant.has_other_pages %}
            <div class="btn-group" role="group" aria-label="Item pagination">
                {% if items_page.has_previous %}
                <a href="?page={{ items_page_relevant.previous_page_number }}" class="btn btn-outline-primary">&laquo;</a>
                {% endif %}
                {% for page_number in items_page_relevant.paginator.page_range %}
                {% if items_page_relevant.number == page_number %}
                <button class="btn btn-outline-primary active">
                    <span>{{ page_number }} <span class="sr-only">(current)</span></span>
                </button>
                {% else %}
                <a href="?page={{ page_number }}" class="btn btn-outline-primary">
                    {{ page_number }}
                </a>
                {% endif %}
                {% endfor %}
                {% if items_page_relevant.has_next %}
                <a href="?page={{ items_page_relevant.next_page_number }}" class="btn btn-outline-primary">&raquo;</a>
                {% endif %}
            </div>
            {% endif %}
            {% else %}
            <p>No items found.</p>
            {% endif %}
        </div>
    </div>
</div>
<footer class="footer-black">
    <div class="container text-center">
        <div class="row align-items-start">
          <div class="col">
            <div class="container">
                <a href="https://www.linkedin.com/" target="_blank">
                    <img src="../static/img/logo_linkedin.png" alt="perfil linkedin" />
                </a>
                <span>
                    <a href="https://www.facebook.com/" target="_blank">
                        <img src="../static/img/logo_facebook.png" alt="perfil facebook" />
                    </a>
                </span>
            </div>
          </div>
          <div class="col">
            Fernando Arce Castillo
          </div>
          <div class="col">
            <div class="boton_contacto" data-toggle="modal" data-target="#contactModal">
                Contactarme
            </div>
          </div>
        </div>
      </div>
</footer>

<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
       
            <div class="modal-header">
                <h5 class="modal-title" id="contactModalLabel">Contactarme</h5>
            </div>
            <div class="modal-body">
                <form method="post" action="{% url 'contacto' %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="email">Correo electrónico:</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="nombre">Nombre:</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="cuerpo">Mensaje:</label>
                        <textarea class="form-control" id="cuerpo" name="cuerpo" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Enviar</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
